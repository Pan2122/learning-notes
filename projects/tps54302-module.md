---
layout: doc
title: TPS54302 DC-DC 模块设计
description: 从原理图、PCB Layout 迭代到硬核工业风丝印设计的全流程记录。
tags: 
  - 硬件设计
  - PCB
  - 电源管理
---

# TPS54302 降压模块设计

> **摘要**：为了验证 TI TPS54302 这颗高性价比同步降压芯片的性能，并为后续项目储备成熟的电源方案，我设计了一款紧凑型 5V/3A DC-DC 模块。本项目不仅仅是电路连线，更着重于 PCB 环路优化、EMI 抑制以及“硬核工业风”的丝印美学设计。

**状态**：🟣 已打板（紫色阻焊/沉金工艺），等待回板测试。

## 1. 选型与设计目标

在嵌入式开发中，稳定且高效的 5V 电源是基础。选择 TPS54302 是基于以下考量：

* **高效率**：同步整流（无需外部续流二极管），在 5V/3A 输出时效率极高。
* **宽电压输入**：支持 4.5V - 28V，覆盖了常见的 12V/24V 工业总线及多节锂电应用。
* **低静态电流**：45µA 静态电流，适合对功耗敏感的设备。
* **简单易用**：SOT-23-6 封装，外围器件极少。

**设计目标参数**：
* **Input**: 4.5V - 28V
* **Output**: 5.0V / 3A (Max)
* **Size**: 25mm x 20mm 

## 2. 原理图设计 (Schematic)

原理图基于 TI 官方推荐电路进行调整。

![最终版原理图](/images/projects/tps54302/schematic-final.png)
*图注：最终版原理图，采用网络标签避免了交叉走线风险*

### 关键计算

输出电压由反馈电阻 $R_1$ (上拉) 和 $R_2$ (下拉) 决定，公式如下：

$$
V_{OUT} = 0.596 \times \left( \frac{R_1}{R_2} + 1 \right)
$$

为了得到 5.0V 输出：
* 选用 **R1 = 100kΩ** (1%)
* 计算得 **R2 ≈ 13.3kΩ** (1%)

### ⚠️ 元器件选型避坑指南

这是未来复用此设计必须注意的 BOM 关键点：

1.  **电感 (L1)**：必须选用 **饱和电流 ($I_{sat}$) > 4A** 的功率电感。
    * ❌ **错误示范**：0603/0805 叠层电感（电流太小，会瞬间饱和导致短路）。
    * ✅ **本项目选用**：1040 封装 (10mm x 10mm) 或 6030 封装的屏蔽功率电感，感值 10µH。
2.  **输入电容 (C1/C2)**：必须耐高压。
    * 如果你输入 24V，电容耐压至少要 35V 或 50V。不要混用耐压 6.3V 的 0805 电容，否则上电即“放鞭炮”。
3.  **自举电容 (C3)**：靠近 Pin 6 和 Pin 2 放置，0.1µF (100nF) 耐压 16V 以上即可。

## 3. PCB Layout：性能的决定性因素

对于开关电源（DC-DC），“原理图对了，板子不一定能用”。Layout 决定了纹波大小和稳定性。在设计过程中，我进行了多次迭代优化。

### 3.1 官方 Layout 指南对比

参考 TI 官方 Datasheet 中的 Layout 建议，核心原则是减小高频回路面积。

![TI Datasheet 提供的 Layout 黄金法则](/images/projects/tps54302/ti-layout-guide.png)
*图注：TI Datasheet 提供的 Layout 黄金法则*

### 3.2 环路优化实战

在初期版本中，我的反馈电阻走线较长，容易引入噪声。经过优化，最终确定了以下布局策略：

* **功率回路 (Power Loop)**：输入电容 $C_{IN}$ (C2/C3) **紧贴** 芯片的 VIN 和 GND 引脚。这是减小高频辐射的关键。
* **SW 节点**：作为最大的噪声源，SW 铜皮面积在满足载流的前提下尽量小，避免形成“发射天线”。
* **反馈路径 (Feedback Path) —— 最关键的修改**：
    * ❌ **错误做法**：电阻放在输出端，FB 信号线跨越半个板子回到芯片（容易耦合 SW 噪声）。
    * ✅ **正确做法**：将分压电阻 R1/R2 **紧靠芯片 FB 引脚放置**。从远端 VOUT 拉一根长线（低阻抗，抗干扰强）过来。

![最终 Layout 方案](/images/projects/tps54302/layout-routing.png)
*图注：最终 Layout 方案。注意右下角 R1/R2 紧贴芯片，输入电容紧贴 VIN*

### 3.3 DFM (可制造性) 检查

在发板前，进行了详细的 DRC (设计规则检查)：
* **过孔设置**：采用 Hole 12mil / Diameter 24mil。这是嘉立创等板厂的标准工艺极限，既保证通流又节省空间。
* **丝印间距**：为了防止生产时丝印被切除，调整了丝印到阻焊层的距离。

## 4. 工业美学：硬核丝印设计

既然是自己做的模块，颜值必须在线。我放弃了传统的字符标注，采用了一套定制的 SVG 矢量丝印。

### 设计理念
* **风格**：Industrial / Cyberpunk (工业/赛博风格)。
* **元素**：高对比度的色块、粗线条边框、加上“IN/OUT”流向指示。
* **配色**：最终选择了 **紫色阻焊 (Purple Solder Mask)** 搭配 **白色丝印**，并在焊盘处做沉金处理（ENIG），呈现出高端显卡般的质感。

![背面定制的 SVG 铭牌](/images/projects/tps54302/3d-back-silk.png)
*图注：背面定制的 SVG 铭牌，清晰标注了输入输出参数，既美观又防呆*

![正面布局紧凑](/images/projects/tps54302/3d-front-view.png)
*图注：正面布局紧凑，紫色板材预览*

## 5. 测试与验证 (To Be Continued...)

> （此部分留空，待回板焊接后补充）

**待测项目**：
- [ ] **纹波测试**：在 5V/1A 和 5V/3A 负载下，使用示波器（交流耦合）测量输出纹波。
- [ ] **瞬态响应**：测试负载突变时电压的跌落和恢复时间。
- [ ] **温升测试**：满载 3A 运行 30 分钟，使用热成像仪观察芯片和电感温度。
- [ ] **效率曲线**：绘制不同负载下的效率图。

## 6. 总结与开源

这个小项目虽然简单，但涵盖了硬件设计的全流程闭环：
1.  **理论计算**：反馈电阻与电感选型。
2.  **Layout 艺术**：对高频回路和敏感信号的把控。
3.  **EDA 技巧**：SVG 导入与层级处理。
4.  **规则检查**：DRC 与制板工艺匹配。

如果测试通过，这将作为一个标准的 Power Block 复用到我未来的机器人和物联网项目中。

---

### 💡 附录：AD/EDA 规则设置备忘

为了防止下次画板忘记，记录一下经过验证的规则：
* **Clearance**: 6mil (通用), 10mil (电源铺铜)
* **Via**: 12/24mil (信号/散热), VIN/VOUT 主干道多打过孔并联。
* **Solder Mask Expansion**: 2.5mil (或者 0，看板厂能力)。
* **Silkscreen Clearance**: 推荐 6mil，极限 0mil (依赖板厂自动裁剪)。